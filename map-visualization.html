<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="åœ°å›¾å¯è§†åŒ–ç³»ç»Ÿ - çŸ³å®¶åº„å¸‚å®æ—¶æ±‚åŠ©åœ°å›¾ï¼Œå¯è§†åŒ–æŸ¥çœ‹å‘¨è¾¹æ±‚åŠ©éœ€æ±‚ï¼Œå¿«é€Ÿå®šä½å¯æä¾›å¸®åŠ©çš„ä½ç½®">
    <meta name="keywords" content="åœ°å›¾å¯è§†åŒ–,çŸ³å®¶åº„åœ°å›¾,å®æ—¶æ±‚åŠ©åœ°å›¾,åœ°ç†ä½ç½®,æ´åŠ©å®šä½">
    <title>åœ°å›¾å¯è§†åŒ– - çŸ³å®¶åº„å¸‚å®æ—¶æ±‚åŠ©åœ°å›¾ | æ´æ‰‹ç¤¾åŒº</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        /* åœ°å›¾æ¦‚è§ˆ */
        .map-overview {
            background: linear-gradient(135deg, #1cc88a 0%, #36b9cc 100%);
            color: white;
            padding: 120px 0 80px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .map-overview::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1542314831-068cd1dbfeeb?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80') center/cover no-repeat;
            opacity: 0.1;
        }
        
        .map-overview h1 {
            font-size: 48px;
            margin-bottom: 20px;
            position: relative;
        }
        
        .map-overview p {
            font-size: 20px;
            max-width: 800px;
            margin: 0 auto 40px;
            position: relative;
            line-height: 1.6;
        }
        
        /* å®æ—¶åœ°å›¾å®¹å™¨ */
        .live-map-container {
            padding: 0;
            position: relative;
            background: #f8f9fa;
        }
        
        .map-header {
            background: white;
            padding: 25px 40px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .map-title h2 {
            margin: 0;
            color: var(--dark-color);
        }
        
        .map-title p {
            margin: 8px 0 0;
            color: var(--gray-color);
        }
        
        .map-controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .map-refresh {
            display: flex;
            align-items: center;
            gap: 8px;
            background: #f8f9fa;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            color: var(--dark-color);
            transition: all 0.3s ease;
        }
        
        .map-refresh:hover {
            background: #e9ecef;
        }
        
        .map-refresh i {
            transition: transform 0.5s ease;
        }
        
        .map-refresh.refreshing i {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Leafletåœ°å›¾å®¹å™¨ */
        #shijiazhuang-map {
            height: 600px;
            width: 100%;
            z-index: 1;
        }
        
        /* åœ°å›¾ä¾§è¾¹æ  */
        .map-sidebar {
            position: absolute;
            top: 0;
            right: 0;
            width: 350px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            padding: 30px;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }
        
        .sidebar-toggle {
            position: absolute;
            left: -45px;
            top: 30px;
            width: 45px;
            height: 45px;
            background: white;
            border: none;
            border-radius: 8px 0 0 8px;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: var(--dark-color);
        }
        
        .sidebar-content {
            margin-top: 20px;
        }
        
        .help-filter {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .filter-title {
            margin: 0 0 20px;
            font-size: 18px;
            color: var(--dark-color);
        }
        
        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .filter-option {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .filter-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #1cc88a;
        }
        
        .filter-option label {
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            color: var(--dark-color);
        }
        
        .priority-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        
        .emergency-dot { background: #ff6b6b; }
        .high-dot { background: #f6c23e; }
        .medium-dot { background: #36b9cc; }
        .low-dot { background: #858796; }
        
        .distance-slider {
            margin: 25px 0;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .slider-value {
            font-weight: 600;
            color: #1cc88a;
        }
        
        .range-slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: #e0e0e0;
            border-radius: 4px;
            outline: none;
        }
        
        .range-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: #1cc88a;
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* æ±‚åŠ©åˆ—è¡¨ */
        .help-list {
            margin-top: 30px;
        }
        
        .help-item {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border-left: 4px solid #1cc88a;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .help-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .help-item.emergency {
            border-left-color: #ff6b6b;
        }
        
        .help-item.high {
            border-left-color: #f6c23e;
        }
        
        .help-item.medium {
            border-left-color: #36b9cc;
        }
        
        .help-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        
        .help-title {
            margin: 0;
            font-size: 16px;
            color: var(--dark-color);
        }
        
        .help-priority {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
        }
        
        .emergency-priority { background: #ff6b6b; }
        .high-priority { background: #f6c23e; }
        .medium-priority { background: #36b9cc; }
        
        .help-location {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--gray-color);
            margin-bottom: 12px;
        }
        
        .help-description {
            font-size: 14px;
            color: var(--gray-color);
            line-height: 1.5;
            margin-bottom: 15px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .help-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .help-distance {
            font-size: 14px;
            color: var(--gray-color);
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .help-time {
            font-size: 12px;
            color: #999;
        }
        
        /* åŒºåŸŸç»Ÿè®¡ */
        .area-stats {
            padding: 80px 0;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }
        
        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-icon {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #1cc88a, #36b9cc);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin: 0 auto 25px;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--dark-color);
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 16px;
            color: var(--gray-color);
        }
        
        .stat-trend {
            font-size: 14px;
            color: #1cc88a;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }
        
        /* çƒ­é—¨æ±‚åŠ©åŒºåŸŸ */
        .hot-zones {
            padding: 80px 0;
        }
        
        .zones-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 50px;
        }
        
        .zone-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease;
        }
        
        .zone-card:hover {
            transform: translateY(-5px);
        }
        
        .zone-header {
            background: linear-gradient(135deg, #1cc88a, #36b9cc);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .zone-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .zone-address {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .zone-content {
            padding: 25px;
        }
        
        .zone-stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .zone-stat {
            text-align: center;
        }
        
        .zone-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .zone-stat-label {
            font-size: 13px;
            color: var(--gray-color);
        }
        
        .zone-help-types {
            margin-top: 20px;
        }
        
        .help-type-tag {
            display: inline-block;
            background: #f8f9fa;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            color: var(--gray-color);
            margin-right: 8px;
            margin-bottom: 8px;
        }
        
        /* åœ°å›¾åŠŸèƒ½ */
        .map-features {
            padding: 80px 0;
            background: var(--light-color);
        }
        
        .features-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 40px;
            margin-top: 50px;
        }
        
        .feature-item {
            text-align: center;
        }
        
        .feature-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #1cc88a, #36b9cc);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            margin: 0 auto 25px;
        }
        
        .feature-title {
            font-size: 20px;
            color: var(--dark-color);
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        .feature-description {
            color: var(--gray-color);
            line-height: 1.6;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .map-sidebar {
                transform: translateX(100%);
            }
            
            .map-sidebar.open {
                transform: translateX(0);
            }
        }
        
        @media (max-width: 768px) {
            .map-overview {
                padding: 80px 0 60px;
            }
            
            .map-overview h1 {
                font-size: 36px;
            }
            
            .map-header {
                padding: 20px;
                flex-direction: column;
                align-items: flex-start;
            }
            
            #shijiazhuang-map {
                height: 450px;
            }
            
            .map-sidebar {
                width: 100%;
                height: 50vh;
                bottom: 0;
                top: auto;
                transform: translateY(100%);
                border-radius: 20px 20px 0 0;
            }
            
            .map-sidebar.open {
                transform: translateY(0);
            }
            
            .sidebar-toggle {
                left: 50%;
                transform: translateX(-50%);
                top: -45px;
                width: 80px;
                height: 45px;
                border-radius: 20px 20px 0 0;
            }
            
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .zones-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .map-overview h1 {
                font-size: 28px;
            }
            
            .map-overview p {
                font-size: 16px;
            }
            
            #shijiazhuang-map {
                height: 350px;
            }
            
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            .feature-icon {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .feature-title {
                font-size: 18px;
            }
        }
        
        /* è‡ªå®šä¹‰Leafletæ ·å¼ */
        .leaflet-control-zoom {
            border: none !important;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1) !important;
            border-radius: 8px !important;
            overflow: hidden;
        }
        
        .leaflet-control-zoom a {
            background: white !important;
            color: var(--dark-color) !important;
            border: none !important;
            width: 40px !important;
            height: 40px !important;
            line-height: 40px !important;
        }
        
        .leaflet-control-zoom a:hover {
            background: #f8f9fa !important;
        }
        
        .leaflet-popup-content {
            min-width: 250px;
            padding: 15px;
        }
        
        .custom-marker {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.3);
            border: 3px solid white;
        }
        
        .emergency-marker { background: #ff6b6b; }
        .high-marker { background: #f6c23e; }
        .medium-marker { background: #36b9cc; }
        .low-marker { background: #858796; }
        
        .marker-pulse {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            opacity: 0;
            animation: pulse 2s infinite;
        }
        
        .emergency-marker .marker-pulse { background: rgba(255, 107, 107, 0.5); }
        .high-marker .marker-pulse { background: rgba(246, 194, 62, 0.5); }
        .medium-marker .marker-pulse { background: rgba(54, 185, 204, 0.5); }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 0.7;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- è·³è¿‡å¯¼èˆªé“¾æ¥ï¼ˆè¾…åŠ©åŠŸèƒ½ï¼‰ -->
    <a href="#main-content" class="sr-only">è·³è¿‡å¯¼èˆª</a>
    
    <!-- å¯¼èˆªæ  -->
    <header>
        <div class="container">
            <nav class="navbar" aria-label="ä¸»å¯¼èˆª">
                <div class="logo">
                    <i class="fas fa-hands-helping" aria-hidden="true"></i>
                    æ´æ‰‹ç¤¾åŒº
                </div>
                <ul class="nav-links">
                    <li><a href="index.html"><i class="fas fa-home"></i> é¦–é¡µ</a></li>
                    <li><a href="#map"><i class="fas fa-map-marked-alt"></i> å®æ—¶åœ°å›¾</a></li>
                    <li><a href="#stats"><i class="fas fa-chart-bar"></i> åŒºåŸŸç»Ÿè®¡</a></li>
                    <li><a href="#zones"><i class="fas fa-fire"></i> çƒ­é—¨åŒºåŸŸ</a></li>
                    <li><a href="#features"><i class="fas fa-cogs"></i> åœ°å›¾åŠŸèƒ½</a></li>
                    <li><a href="login.html" class="btn btn-primary"><i class="fas fa-user-circle"></i> ç™»å½•æŸ¥çœ‹</a></li>
                </ul>
                <button class="mobile-menu" aria-label="åˆ‡æ¢èœå•" aria-expanded="false">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <main id="main-content">
        <!-- åœ°å›¾æ¦‚è§ˆ -->
        <section class="map-overview">
            <div class="container">
                <h1>çŸ³å®¶åº„å¸‚å®æ—¶æ±‚åŠ©åœ°å›¾</h1>
                <p>å¯è§†åŒ–æŸ¥çœ‹çŸ³å®¶åº„å¸‚å‘¨è¾¹çš„æ±‚åŠ©éœ€æ±‚ï¼Œå¿«é€Ÿå®šä½å¯æä¾›å¸®åŠ©çš„ä½ç½®ï¼Œè®©æ´åŠ©æ›´åŠ ç²¾å‡†é«˜æ•ˆã€‚</p>
                <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
                    <a href="#map" class="btn btn-primary" style="background: white; color: #1cc88a; font-weight: 700; padding: 18px 40px; font-size: 18px;">
                        æŸ¥çœ‹å®æ—¶åœ°å›¾ <i class="fas fa-map-marked-alt"></i>
                    </a>
                    <a href="post-help.html" class="btn btn-outline" style="background: transparent; border-color: white; color: white; padding: 18px 40px; font-size: 18px;">
                        å‘å¸ƒä½ç½®æ±‚åŠ© <i class="fas fa-bullhorn"></i>
                    </a>
                </div>
                <div class="video-stats" style="margin-top: 60px; color: white;">
                    <div class="stat">
                        <span class="stat-number" style="color: white;">247</span>
                        <span class="stat-label">å®æ—¶æ±‚åŠ©</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" style="color: white;">15åˆ†é’Ÿ</span>
                        <span class="stat-label">å¹³å‡å“åº”</span>
                    </div>
                    <div class="stat">
                        <span class="stat-number" style="color: white;">89%</span>
                        <span class="stat-label">å¸‚å†…è¦†ç›–</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- å®æ—¶åœ°å›¾ -->
        <section class="live-map-container" id="map">
            <div class="map-header">
                <div class="map-title">
                    <h2>çŸ³å®¶åº„å¸‚å®æ—¶æ±‚åŠ©åˆ†å¸ƒ</h2>
                    <p>åœ°å›¾ä¸Šçš„æ ‡è®°ç‚¹ä»£è¡¨å®æ—¶æ±‚åŠ©ä½ç½®ï¼Œç‚¹å‡»æ ‡è®°æŸ¥çœ‹è¯¦æƒ…</p>
                </div>
                <div class="map-controls">
                    <button class="map-refresh" id="refresh-map">
                        <i class="fas fa-sync-alt"></i>
                        <span>åˆ·æ–°åœ°å›¾</span>
                    </button>
                    <button class="btn btn-primary" onclick="window.location.href='post-help.html'">
                        <i class="fas fa-plus-circle"></i> å‘å¸ƒæ±‚åŠ©
                    </button>
                </div>
            </div>
            
            <!-- Leafletåœ°å›¾å®¹å™¨ -->
            <div id="shijiazhuang-map"></div>
            
            <!-- åœ°å›¾ä¾§è¾¹æ  -->
            <div class="map-sidebar" id="map-sidebar">
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i class="fas fa-chevron-left"></i>
                </button>
                
                <h3>æ±‚åŠ©ç­›é€‰</h3>
                <div class="sidebar-content">
                    <div class="help-filter">
                        <h4 class="filter-title">æ±‚åŠ©ç±»å‹</h4>
                        <div class="filter-options">
                            <div class="filter-option">
                                <input type="checkbox" id="emergency-help" checked>
                                <label for="emergency-help">
                                    <span class="priority-dot emergency-dot"></span>
                                    <span>ç´§æ€¥æ±‚åŠ©</span>
                                </label>
                            </div>
                            <div class="filter-option">
                                <input type="checkbox" id="high-help" checked>
                                <label for="high-help">
                                    <span class="priority-dot high-dot"></span>
                                    <span>é«˜ä¼˜å…ˆçº§</span>
                                </label>
                            </div>
                            <div class="filter-option">
                                <input type="checkbox" id="medium-help" checked>
                                <label for="medium-help">
                                    <span class="priority-dot medium-dot"></span>
                                    <span>ä¸­ç­‰ä¼˜å…ˆçº§</span>
                                </label>
                            </div>
                            <div class="filter-option">
                                <input type="checkbox" id="low-help">
                                <label for="low-help">
                                    <span class="priority-dot low-dot"></span>
                                    <span>ä½ä¼˜å…ˆçº§</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="distance-slider">
                            <div class="slider-label">
                                <span>è·ç¦»ç­›é€‰</span>
                                <span class="slider-value" id="distance-value">5å…¬é‡Œ</span>
                            </div>
                            <input type="range" min="1" max="20" value="5" class="range-slider" id="distance-slider">
                        </div>
                    </div>
                    
                    <div class="help-list">
                        <h4>é™„è¿‘æ±‚åŠ©åˆ—è¡¨</h4>
                        <!-- æ±‚åŠ©é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>
        </section>

        <!-- åŒºåŸŸç»Ÿè®¡ -->
        <section class="area-stats" id="stats">
            <div class="container">
                <div class="section-title">
                    <h2>çŸ³å®¶åº„å¸‚æ±‚åŠ©ç»Ÿè®¡</h2>
                    <p>åŸºäºå®æ—¶æ•°æ®çš„åŒºåŸŸæ±‚åŠ©ç»Ÿè®¡åˆ†æ</p>
                </div>
                
                <div class="stats-container">
                    <!-- ç»Ÿè®¡1 -->
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“</div>
                        <div class="stat-value" id="active-helps">247</div>
                        <div class="stat-label">å®æ—¶æ±‚åŠ©æ•°é‡</div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up"></i>
                            <span>æ¯”æ˜¨æ—¥ +12%</span>
                        </div>
                    </div>
                    
                    <!-- ç»Ÿè®¡2 -->
                    <div class="stat-card">
                        <div class="stat-icon">ğŸš¨</div>
                        <div class="stat-value" id="emergency-helps">42</div>
                        <div class="stat-label">ç´§æ€¥æ±‚åŠ©</div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-down"></i>
                            <span>æ¯”æ˜¨æ—¥ -8%</span>
                        </div>
                    </div>
                    
                    <!-- ç»Ÿè®¡3 -->
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ¤</div>
                        <div class="stat-value" id="active-volunteers">1,248</div>
                        <div class="stat-label">æ´»è·ƒå¿—æ„¿è€…</div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-up"></i>
                            <span>æ¯”æ˜¨æ—¥ +5%</span>
                        </div>
                    </div>
                    
                    <!-- ç»Ÿè®¡4 -->
                    <div class="stat-card">
                        <div class="stat-icon">âš¡</div>
                        <div class="stat-value" id="avg-response">15<span style="font-size: 24px;">åˆ†é’Ÿ</span></div>
                        <div class="stat-label">å¹³å‡å“åº”æ—¶é—´</div>
                        <div class="stat-trend">
                            <i class="fas fa-arrow-down"></i>
                            <span>æ¯”ä¸Šå‘¨å¿«18%</span>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-50">
                    <a href="#" class="btn btn-outline" style="padding: 12px 40px;">
                        <i class="fas fa-download"></i> ä¸‹è½½è¯¦ç»†ç»Ÿè®¡æ•°æ®
                    </a>
                </div>
            </div>
        </section>

        <!-- çƒ­é—¨æ±‚åŠ©åŒºåŸŸ -->
        <section class="hot-zones" id="zones">
            <div class="container">
                <div class="section-title">
                    <h2>çƒ­é—¨æ±‚åŠ©åŒºåŸŸ</h2>
                    <p>çŸ³å®¶åº„å¸‚æ±‚åŠ©éœ€æ±‚é›†ä¸­çš„åŒºåŸŸ</p>
                </div>
                
                <div class="zones-grid">
                    <!-- åŒºåŸŸ1 -->
                    <div class="zone-card">
                        <div class="zone-header">
                            <div class="zone-name">é•¿å®‰åŒº</div>
                            <div class="zone-address">çŸ³å®¶åº„å¸‚ä¸­å¿ƒåŒºåŸŸ</div>
                        </div>
                        <div class="zone-content">
                            <div class="zone-stats">
                                <div class="zone-stat">
                                    <div class="zone-stat-value">68</div>
                                    <div class="zone-stat-label">å®æ—¶æ±‚åŠ©</div>
                                </div>
                                <div class="zone-stat">
                                    <div class="zone-stat-value">12</div>
                                    <div class="zone-stat-label">ç´§æ€¥æ±‚åŠ©</div>
                                </div>
                                <div class="zone-stat">
                                    <div class="zone-stat-value">89%</div>
                                    <div class="zone-stat-label">è§£å†³ç‡</div>
                                </div>
                            </div>
                            <p style="color: var(--gray-color); font-size: 14px; line-height: 1.6;">
                                çŸ³å®¶åº„å¸‚ä¸­å¿ƒåŒºåŸŸï¼Œäººå£å¯†é›†ï¼Œæ±‚åŠ©éœ€æ±‚å¤šæ ·åŒ–ï¼Œä»¥ç”Ÿæ´»å¸®åŠ©å’ŒåŒ»ç–—å¥åº·ç±»ä¸ºä¸»ã€‚
                            </p>
                            <div class="zone-help-types">
                                <span class="help-type-tag">ç”Ÿæ´»å¸®åŠ©</span>
                                <span class="help-type-tag">åŒ»ç–—å¥åº·</span>
                                <span class="help-type-tag">æ•™è‚²è¾…å¯¼</span>
                                <span class="help-type-tag">ç´§æ€¥æ±‚åŠ©</span>
                            </div>
                            <div class="text-center mt-20">
                                <button class="btn btn-outline" onclick="focusOnArea('é•¿å®‰åŒº')" style="padding: 8px 25px; font-size: 14px;">
                                    <i class="fas fa-search-location"></i> æŸ¥çœ‹æ­¤åŒºåŸŸ
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åŒºåŸŸ2 -->
                    <div class="zone-card">
                        <div class="zone-header">
                            <div class="zone-name">æ¡¥è¥¿åŒº</div>
                            <div class="zone-address">çŸ³å®¶åº„å¸‚è¥¿éƒ¨åŒºåŸŸ</div>
                        </div>
                        <div class="zone-content">
                            <div class="zone-stats">
                                <div class="zone-stat">
                                    <div class="zone-stat-value">54</div>
                                    <div class="zone-stat-label">å®æ—¶æ±‚åŠ©</div>
                                </div>
                                <div class="zone-stat">
                                    <div class="zone-stat-value">8</div>
                                    <div class="zone-stat-label">ç´§æ€¥æ±‚åŠ©</div>
                                </div>
                                <div class="zone-stat">
                                    <div class="zone-stat-value">92%</div>
                                    <div class="zone-stat-label">è§£å†³ç‡</div>
                                </div>
                            </div>
                            <p style="color: var(--gray-color); font-size: 14px; line-height: 1.6;">
                                çŸ³å®¶åº„å¸‚è€åŸåŒºï¼Œè€å¹´äººå£è¾ƒå¤šï¼ŒåŠ©è€æœåŠ¡å’ŒåŒ»ç–—å¥åº·ç±»æ±‚åŠ©éœ€æ±‚çªå‡ºã€‚
                            </p>
                            <div class="zone-help-types">
                                <span class="help-type-tag">åŠ©è€æœåŠ¡</span>
                                <span class="help-type-tag">åŒ»ç–—å¥åº·</span>
                                <span class="help-type-tag">æŠ€æœ¯ç»´ä¿®</span>
                                <span class="help-type-tag">æ—¥å¸¸è´­ç‰©</span>
                            </div>
                            <div class="text-center mt-20">
                                <button class="btn btn-outline" onclick="focusOnArea('æ¡¥è¥¿åŒº')" style="padding: 8px 25px; font-size: 14px;">
                                    <i class="fas fa-search-location"></i> æŸ¥çœ‹æ­¤åŒºåŸŸ
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- åŒºåŸŸ3 -->
                    <div class="zone-card">
                        <div class="zone-header">
                            <div class="zone-name">è£•ååŒº</div>
                            <div class="zone-address">çŸ³å®¶åº„å¸‚ä¸œå—åŒºåŸŸ</div>
                        </div>
                        <div class="zone-content">
                            <div class="zone-stats">
                                <div class="zone-stat">
                                    <div class="zone-stat-value">47</div>
                                    <div class="zone-stat-label">å®æ—¶æ±‚åŠ©</div>
                                </div>
                                <div class="zone-stat">
                                    <div class="zone-stat-value">6</div>
                                    <div class="zone-stat-label">ç´§æ€¥æ±‚åŠ©</div>
                                </div>
                                <div class="zone-stat">
                                    <div class="zone-stat-value">94%</div>
                                    <div class="zone-stat-label">è§£å†³ç‡</div>
                                </div>
                            </div>
                            <p style="color: var(--gray-color); font-size: 14px; line-height: 1.6;">
                                æ–°å…´ä½å®…åŒºé›†ä¸­ï¼Œå¹´è½»å®¶åº­è¾ƒå¤šï¼Œæ•™è‚²è¾…å¯¼å’Œå®¶åº­æœåŠ¡ç±»æ±‚åŠ©éœ€æ±‚æ˜¾è‘—ã€‚
                            </p>
                            <div class="zone-help-types">
                                <span class="help-type-tag">æ•™è‚²è¾…å¯¼</span>
                                <span class="help-type-tag">å®¶åº­æœåŠ¡</span>
                                <span class="help-type-tag">æŠ€æœ¯ç»´ä¿®</span>
                                <span class="help-type-tag">å® ç‰©ç…§çœ‹</span>
                            </div>
                            <div class="text-center mt-20">
                                <button class="btn btn-outline" onclick="focusOnArea('è£•ååŒº')" style="padding: 8px 25px; font-size: 14px;">
                                    <i class="fas fa-search-location"></i> æŸ¥çœ‹æ­¤åŒºåŸŸ
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- åœ°å›¾åŠŸèƒ½ -->
        <section class="map-features" id="features">
            <div class="container">
                <div class="section-title">
                    <h2>åœ°å›¾å¯è§†åŒ–åŠŸèƒ½</h2>
                    <p>ä¸°å¯Œçš„åœ°å›¾åŠŸèƒ½ï¼Œè®©æ´åŠ©æ›´åŠ ç²¾å‡†é«˜æ•ˆ</p>
                </div>
                
                <div class="features-container">
                    <!-- åŠŸèƒ½1 -->
                    <div class="feature-item">
                        <div class="feature-icon">ğŸ“</div>
                        <h3 class="feature-title">å®æ—¶ä½ç½®æ ‡è®°</h3>
                        <p class="feature-description">å®æ—¶æ˜¾ç¤ºçŸ³å®¶åº„å¸‚èŒƒå›´å†…çš„æ±‚åŠ©ä½ç½®ï¼Œä¸åŒé¢œè‰²æ ‡è®°ä»£è¡¨ä¸åŒç´§æ€¥ç¨‹åº¦ï¼Œä¸€ç›®äº†ç„¶ã€‚</p>
                    </div>
                    
                    <!-- åŠŸèƒ½2 -->
                    <div class="feature-item">
                        <div class="feature-icon">ğŸ¯</div>
                        <h3 class="feature-title">ç²¾å‡†è·ç¦»è®¡ç®—</h3>
                        <p class="feature-description">è‡ªåŠ¨è®¡ç®—æ±‚åŠ©è€…ä¸å¿—æ„¿è€…çš„è·ç¦»ï¼Œæ™ºèƒ½æ¨èæœ€è¿‘çš„å¿—æ„¿è€…ï¼Œå‡å°‘å“åº”æ—¶é—´ã€‚</p>
                    </div>
                    
                    <!-- åŠŸèƒ½3 -->
                    <div class="feature-item">
                        <div class="feature-icon">ğŸ—ºï¸</div>
                        <h3 class="feature-title">åŒºåŸŸçƒ­åº¦åˆ†æ</h3>
                        <p class="feature-description">å¯è§†åŒ–å±•ç¤ºä¸åŒåŒºåŸŸçš„æ±‚åŠ©å¯†åº¦ï¼Œå¸®åŠ©å¿—æ„¿è€…äº†è§£éœ€æ±‚åˆ†å¸ƒï¼Œåˆç†è§„åˆ’æ´åŠ©è·¯çº¿ã€‚</p>
                    </div>
                    
                    <!-- åŠŸèƒ½4 -->
                    <div class="feature-item">
                        <div class="feature-icon">ğŸ””</div>
                        <h3 class="feature-title">å®æ—¶é€šçŸ¥æé†’</h3>
                        <p class="feature-description">å½“é™„è¿‘å‡ºç°ç´§æ€¥æ±‚åŠ©æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨å‘é™„è¿‘å¿—æ„¿è€…æ¨é€é€šçŸ¥ï¼Œç¡®ä¿å¿«é€Ÿå“åº”ã€‚</p>
                    </div>
                    
                    <!-- åŠŸèƒ½5 -->
                    <div class="feature-item">
                        <div class="feature-icon">ğŸ“Š</div>
                        <h3 class="feature-title">æ•°æ®ç»Ÿè®¡åˆ†æ</h3>
                        <p class="feature-description">æä¾›åŒºåŸŸæ±‚åŠ©ç»Ÿè®¡æ•°æ®ï¼Œå¸®åŠ©å…¬ç›Šç»„ç»‡å’Œæ”¿åºœäº†è§£éœ€æ±‚åˆ†å¸ƒï¼Œä¼˜åŒ–èµ„æºé…ç½®ã€‚</p>
                    </div>
                    
                    <!-- åŠŸèƒ½6 -->
                    <div class="feature-item">
                        <div class="feature-icon">ğŸš—</div>
                        <h3 class="feature-title">è·¯çº¿è§„åˆ’å¯¼èˆª</h3>
                        <p class="feature-description">é›†æˆå¯¼èˆªåŠŸèƒ½ï¼Œä¸ºå¿—æ„¿è€…è§„åˆ’æœ€ä½³è·¯çº¿ï¼ŒèŠ‚çœæ—¶é—´ï¼Œæé«˜æ´åŠ©æ•ˆç‡ã€‚</p>
                    </div>
                </div>
                
                <div class="text-center mt-50">
                    <a href="post-help.html" class="btn btn-primary" style="padding: 18px 50px; font-size: 18px;">
                        <i class="fas fa-map-marker-alt"></i> åœ¨åœ°å›¾ä¸Šå‘å¸ƒæ±‚åŠ©
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- åº•éƒ¨ -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>åœ°å›¾å¯è§†åŒ–</h3>
                    <ul class="footer-links">
                        <li><a href="#map"><i class="fas fa-chevron-right"></i> å®æ—¶åœ°å›¾</a></li>
                        <li><a href="#stats"><i class="fas fa-chevron-right"></i> åŒºåŸŸç»Ÿè®¡</a></li>
                        <li><a href="#zones"><i class="fas fa-chevron-right"></i> çƒ­é—¨åŒºåŸŸ</a></li>
                        <li><a href="#features"><i class="fas fa-chevron-right"></i> åœ°å›¾åŠŸèƒ½</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>æ ¸å¿ƒåŠŸèƒ½</h3>
                    <ul class="footer-links">
                        <li><a href="intelligent-matching.html"><i class="fas fa-chevron-right"></i> æ™ºèƒ½åŒ¹é…ç³»ç»Ÿ</a></li>
                        <li><a href="secure-communication.html"><i class="fas fa-chevron-right"></i> å®‰å…¨æ²Ÿé€šå¹³å°</a></li>
                        <li><a href="credit-rating.html"><i class="fas fa-chevron-right"></i> ä¿¡ç”¨è¯„ä»·ç³»ç»Ÿ</a></li>
                        <li><a href="transparent-tracking.html"><i class="fas fa-chevron-right"></i> é€æ˜è¿½è¸ªç³»ç»Ÿ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>å¸®åŠ©ä¸­å¿ƒ</h3>
                    <ul class="footer-links">
                        <li><a href="how-to-get-help.html"><i class="fas fa-chevron-right"></i> å¦‚ä½•æ±‚åŠ©</a></li>
                        <li><a href="become-volunteer.html"><i class="fas fa-chevron-right"></i> æˆä¸ºå¿—æ„¿è€…</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> å¸¸è§é—®é¢˜</a></li>
                        <li><a href="#"><i class="fas fa-chevron-right"></i> ç”¨æˆ·åè®®</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>è”ç³»æˆ‘ä»¬</h3>
                    <ul class="footer-links footer-contact">
                        <li><i class="fas fa-envelope"></i> é‚®ç®±ï¼š2639687821@qq.com</li>
                        <li><i class="fas fa-phone-alt"></i> ç”µè¯ï¼š15612140351</li>
                        <li><i class="fas fa-map-marker-alt"></i> åœ°å€ï¼šæ²³åŒ—ç§‘æŠ€å¤§å­¦</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 æ´æ‰‹ç¤¾åŒº - ç»¼åˆæ€§ç¤¾ä¼šæ´åŠ©å¹³å° ç‰ˆæƒæ‰€æœ‰ | å†€ICPå¤‡12345678å·</p>
                <p class="mt-20">è®©æ¯ä¸€ä»½å–„æ„éƒ½æœ‰å›å“ï¼Œè®©æ¯ä¸€æ¬¡æ±‚åŠ©éƒ½æœ‰å›åº”</p>
            </div>
        </div>
    </footer>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="main.js"></script>
    <script>
        // çŸ³å®¶åº„å¸‚åœ°å›¾åæ ‡ (ä¸­å¿ƒç‚¹)
        const shijiazhuangCenter = [38.0428, 114.5149];
        
        // æ¨¡æ‹Ÿæ±‚åŠ©æ•°æ®
        const helpData = [
            {
                id: 1,
                title: "ç‹¬å±…è€äººé€é¤",
                type: "ç”Ÿæ´»å¸®åŠ©",
                priority: "emergency",
                location: [38.0528, 114.5149],
                address: "é•¿å®‰åŒºä¸­å±±ä¸œè·¯",
                description: "78å²ç‹¬å±…è€äººï¼Œè¡ŒåŠ¨ä¸ä¾¿ï¼Œéœ€è¦æ¯æ—¥é€é¤æœåŠ¡",
                distance: "1.2km",
                time: "15åˆ†é’Ÿå‰",
                volunteer: "æå¥³å£«"
            },
            {
                id: 2,
                title: "å­¦ç”Ÿæ•°å­¦è¾…å¯¼",
                type: "æ•™è‚²è¾…å¯¼",
                priority: "high",
                location: [38.0328, 114.5249],
                address: "æ¡¥è¥¿åŒºå¸ˆèŒƒè¡—",
                description: "åˆä¸­ç”Ÿæ•°å­¦å­¦ä¹ å›°éš¾ï¼Œéœ€è¦æ¯å‘¨2æ¬¡è¾…å¯¼",
                distance: "2.5km",
                time: "30åˆ†é’Ÿå‰",
                volunteer: "å¼ è€å¸ˆ"
            },
            {
                id: 3,
                title: "å®¶ç”µç»´ä¿®",
                type: "æŠ€æœ¯ç»´ä¿®",
                priority: "medium",
                location: [38.0428, 114.5049],
                address: "è£•ååŒºå»ºåå—å¤§è¡—",
                description: "æ´—è¡£æœºæ•…éšœæ— æ³•ä½¿ç”¨ï¼Œéœ€è¦ä¸“ä¸šç»´ä¿®",
                distance: "1.8km",
                time: "1å°æ—¶å‰",
                volunteer: "ç‹å¸ˆå‚…"
            },
            {
                id: 4,
                title: "é™ªåŒå°±åŒ»",
                type: "åŒ»ç–—å¥åº·",
                priority: "emergency",
                location: [38.0628, 114.5149],
                address: "æ–°ååŒºå’Œå¹³è¥¿è·¯",
                description: "éª¨æŠ˜æœ¯åå¤æŸ¥ï¼Œéœ€è¦é™ªåŒå‰å¾€åŒ»é™¢",
                distance: "3.2km",
                time: "45åˆ†é’Ÿå‰",
                volunteer: "èµµæŠ¤å£«"
            },
            {
                id: 5,
                title: "å® ç‰©ç…§çœ‹",
                type: "ç”Ÿæ´»å¸®åŠ©",
                priority: "medium",
                location: [38.0428, 114.5349],
                address: "é•¿å®‰åŒºä½“è‚²åŒ—å¤§è¡—",
                description: "å‡ºå·®ä¸€å‘¨ï¼Œéœ€è¦ç…§çœ‹çŒ«å’ª",
                distance: "2.1km",
                time: "2å°æ—¶å‰",
                volunteer: "å­™å°å§"
            },
            {
                id: 6,
                title: "æ³•å¾‹å’¨è¯¢",
                type: "ä¸“ä¸šå’¨è¯¢",
                priority: "high",
                location: [38.0228, 114.5149],
                address: "æ¡¥è¥¿åŒºè£•åè¥¿è·¯",
                description: "åŠ³åŠ¨åˆåŒçº çº·å’¨è¯¢",
                distance: "4.5km",
                time: "3å°æ—¶å‰",
                volunteer: "åˆ˜å¾‹å¸ˆ"
            },
            {
                id: 7,
                title: "ç´§æ€¥è¯å“é…é€",
                type: "åŒ»ç–—å¥åº·",
                priority: "emergency",
                location: [38.0528, 114.4949],
                address: "è£•ååŒºç¿Ÿè¥å—å¤§è¡—",
                description: "é«˜è¡€å‹è¯ç‰©ç”¨å®Œï¼Œæ€¥éœ€é…é€",
                distance: "1.5km",
                time: "10åˆ†é’Ÿå‰",
                volunteer: "å‘¨åŒ»ç”Ÿ"
            },
            {
                id: 8,
                title: "ç”µè„‘ç»´ä¿®",
                type: "æŠ€æœ¯ç»´ä¿®",
                priority: "medium",
                location: [38.0328, 114.5049],
                address: "æ–°ååŒºä¸­ååŒ—å¤§è¡—",
                description: "ç”µè„‘æ— æ³•å¼€æœºï¼Œå·¥ä½œæ–‡ä»¶æ€¥éœ€æ¢å¤",
                distance: "2.8km",
                time: "1.5å°æ—¶å‰",
                volunteer: "å´å·¥ç¨‹å¸ˆ"
            }
        ];
        
        // åŒºåŸŸä¸­å¿ƒç‚¹
        const areaCenters = {
            'é•¿å®‰åŒº': [38.0528, 114.5149],
            'æ¡¥è¥¿åŒº': [38.0328, 114.5249],
            'è£•ååŒº': [38.0428, 114.5049]
        };
        
        // åˆå§‹åŒ–åœ°å›¾
        let map;
        let markers = [];
        let currentFilters = {
            emergency: true,
            high: true,
            medium: true,
            low: false,
            distance: 5
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–åœ°å›¾
            initMap();
            
            // æ·»åŠ æ ‡è®°ç‚¹
            addMarkers();
            
            // åˆå§‹åŒ–ä¾§è¾¹æ 
            initSidebar();
            
            // åˆå§‹åŒ–ç­›é€‰å™¨
            initFilters();
            
            // åˆå§‹åŒ–ç»Ÿè®¡æ•°æ®
            initStats();
            
            // åˆ·æ–°åœ°å›¾æŒ‰é’®
            const refreshBtn = document.getElementById('refresh-map');
            refreshBtn.addEventListener('click', function() {
                refreshMap();
            });
            
            // å“åº”å¼ï¼šç§»åŠ¨è®¾å¤‡é»˜è®¤å…³é—­ä¾§è¾¹æ 
            if (window.innerWidth <= 1200) {
                document.getElementById('map-sidebar').classList.remove('open');
            }
        });
        
        // åˆå§‹åŒ–åœ°å›¾
        function initMap() {
            map = L.map('shijiazhuang-map').setView(shijiazhuangCenter, 12);
            
            // æ·»åŠ åœ°å›¾åº•å›¾ï¼ˆä½¿ç”¨OpenStreetMapï¼‰
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
                maxZoom: 18
            }).addTo(map);
            
            // æ·»åŠ çŸ³å®¶åº„å¸‚è½®å»“ï¼ˆç®€åŒ–ç‰ˆï¼‰
            const shijiazhuangBounds = [
                [38.12, 114.38],
                [37.96, 114.65]
            ];
            
            // æ·»åŠ è¾¹ç•ŒçŸ©å½¢
            L.rectangle(shijiazhuangBounds, {
                color: '#1cc88a',
                weight: 2,
                fillOpacity: 0.05,
                fillColor: '#1cc88a'
            }).addTo(map).bindPopup('çŸ³å®¶åº„å¸‚è¾–åŒº');
        }
        
        // æ·»åŠ æ ‡è®°ç‚¹
        function addMarkers() {
            // æ¸…é™¤ç°æœ‰æ ‡è®°
            markers.forEach(marker => map.removeLayer(marker));
            markers = [];
            
            // æ·»åŠ æ–°æ ‡è®°
            helpData.forEach(help => {
                // æ£€æŸ¥æ˜¯å¦ç¬¦åˆç­›é€‰æ¡ä»¶
                if (!currentFilters[help.priority]) return;
                
                // åˆ›å»ºè‡ªå®šä¹‰æ ‡è®°
                const markerIcon = L.divIcon({
                    className: 'custom-marker',
                    html: createMarkerHTML(help),
                    iconSize: [40, 40],
                    iconAnchor: [20, 40]
                });
                
                // æ·»åŠ æ ‡è®°
                const marker = L.marker(help.location, { icon: markerIcon }).addTo(map);
                
                // æ·»åŠ å¼¹å‡ºçª—å£
                const popupContent = createPopupContent(help);
                marker.bindPopup(popupContent);
                
                // ç‚¹å‡»æ ‡è®°æ—¶åœ¨ä¾§è¾¹æ æ˜¾ç¤ºè¯¦æƒ…
                marker.on('click', function() {
                    showHelpDetails(help);
                });
                
                markers.push(marker);
            });
            
            // æ›´æ–°æ±‚åŠ©åˆ—è¡¨
            updateHelpList();
        }
        
        // åˆ›å»ºæ ‡è®°HTML
        function createMarkerHTML(help) {
            let icon, pulseClass = '';
            
            switch(help.priority) {
                case 'emergency':
                    icon = 'ğŸš¨';
                    pulseClass = 'emergency-marker';
                    break;
                case 'high':
                    icon = 'âš ï¸';
                    pulseClass = 'high-marker';
                    break;
                case 'medium':
                    icon = 'ğŸ”§';
                    pulseClass = 'medium-marker';
                    break;
                default:
                    icon = 'â“';
                    pulseClass = 'low-marker';
            }
            
            return `
                <div class="${pulseClass}">
                    <div class="marker-pulse"></div>
                    ${icon}
                </div>
            `;
        }
        
        // åˆ›å»ºå¼¹å‡ºçª—å£å†…å®¹
        function createPopupContent(help) {
            let priorityText, priorityClass;
            
            switch(help.priority) {
                case 'emergency':
                    priorityText = 'ç´§æ€¥æ±‚åŠ©';
                    priorityClass = 'emergency-priority';
                    break;
                case 'high':
                    priorityText = 'é«˜ä¼˜å…ˆçº§';
                    priorityClass = 'high-priority';
                    break;
                case 'medium':
                    priorityText = 'ä¸­ç­‰ä¼˜å…ˆçº§';
                    priorityClass = 'medium-priority';
                    break;
                default:
                    priorityText = 'ä½ä¼˜å…ˆçº§';
                    priorityClass = 'low-priority';
            }
            
            return `
                <div class="popup-content">
                    <div class="help-header">
                        <h4 class="help-title">${help.title}</h4>
                        <span class="help-priority ${priorityClass}">${priorityText}</span>
                    </div>
                    <div class="help-location">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>${help.address}</span>
                    </div>
                    <p class="help-description">${help.description}</p>
                    <div class="help-footer">
                        <div class="help-distance">
                            <i class="fas fa-walking"></i>
                            <span>è·ç¦»ï¼š${help.distance}</span>
                        </div>
                        <div class="help-time">
                            <i class="far fa-clock"></i>
                            <span>${help.time}</span>
                        </div>
                    </div>
                    <div style="margin-top: 15px; display: flex; gap: 10px;">
                        <button class="btn btn-primary" style="padding: 8px 15px; font-size: 12px;" onclick="window.location.href='post-help.html?id=${help.id}'">
                            <i class="fas fa-info-circle"></i> æŸ¥çœ‹è¯¦æƒ…
                        </button>
                        <button class="btn btn-outline" style="padding: 8px 15px; font-size: 12px;" onclick="window.location.href='login.html'">
                            <i class="fas fa-hands-helping"></i> ç«‹å³å¸®åŠ©
                        </button>
                    </div>
                </div>
            `;
        }
        
        // åˆå§‹åŒ–ä¾§è¾¹æ 
        function initSidebar() {
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('map-sidebar');
            
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('open');
                
                // æ›´æ–°å›¾æ ‡
                const icon = sidebarToggle.querySelector('i');
                if (sidebar.classList.contains('open')) {
                    icon.className = 'fas fa-chevron-right';
                } else {
                    icon.className = 'fas fa-chevron-left';
                }
            });
        }
        
        // åˆå§‹åŒ–ç­›é€‰å™¨
        function initFilters() {
            // ä¼˜å…ˆçº§ç­›é€‰
            const priorityFilters = document.querySelectorAll('.help-filter input[type="checkbox"]');
            priorityFilters.forEach(filter => {
                filter.addEventListener('change', function() {
                    const priority = this.id.replace('-help', '');
                    currentFilters[priority] = this.checked;
                    addMarkers();
                });
            });
            
            // è·ç¦»ç­›é€‰
            const distanceSlider = document.getElementById('distance-slider');
            const distanceValue = document.getElementById('distance-value');
            
            distanceSlider.addEventListener('input', function() {
                const value = this.value;
                distanceValue.textContent = `${value}å…¬é‡Œ`;
                currentFilters.distance = parseInt(value);
                updateHelpList();
            });
        }
        
        // æ›´æ–°æ±‚åŠ©åˆ—è¡¨
        function updateHelpList() {
            const helpList = document.querySelector('.help-list');
            let filteredHelps = helpData.filter(help => currentFilters[help.priority]);
            
            // æŒ‰è·ç¦»ç­›é€‰ï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…åº”è¯¥è®¡ç®—çœŸå®è·ç¦»ï¼‰
            filteredHelps = filteredHelps.slice(0, 5); // åªæ˜¾ç¤ºå‰5ä¸ª
            
            // ç”ŸæˆHTML
            let html = '<h4>é™„è¿‘æ±‚åŠ©åˆ—è¡¨</h4>';
            
            if (filteredHelps.length === 0) {
                html += '<p style="color: var(--gray-color); text-align: center; padding: 20px;">æš‚æ— ç¬¦åˆæ¡ä»¶çš„æ±‚åŠ©</p>';
            } else {
                filteredHelps.forEach(help => {
                    let priorityClass, priorityText;
                    
                    switch(help.priority) {
                        case 'emergency':
                            priorityClass = 'emergency';
                            priorityText = 'ç´§æ€¥';
                            break;
                        case 'high':
                            priorityClass = 'high';
                            priorityText = 'é«˜';
                            break;
                        case 'medium':
                            priorityClass = 'medium';
                            priorityText = 'ä¸­';
                            break;
                        default:
                            priorityClass = 'low';
                            priorityText = 'ä½';
                    }
                    
                    html += `
                        <div class="help-item ${priorityClass}" onclick="showHelpDetails(${help.id})">
                            <div class="help-header">
                                <h4 class="help-title">${help.title}</h4>
                                <span class="help-priority ${priorityClass}-priority">${priorityText}</span>
                            </div>
                            <div class="help-location">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>${help.address}</span>
                            </div>
                            <p class="help-description">${help.description}</p>
                            <div class="help-footer">
                                <div class="help-distance">
                                    <i class="fas fa-walking"></i>
                                    <span>${help.distance}</span>
                                </div>
                                <div class="help-time">
                                    <i class="far fa-clock"></i>
                                    <span>${help.time}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            helpList.innerHTML = html;
        }
        
        // æ˜¾ç¤ºæ±‚åŠ©è¯¦æƒ…
        function showHelpDetails(helpId) {
            // å¦‚æœæ˜¯æ•°å­—IDï¼Œæ‰¾åˆ°å¯¹åº”çš„æ±‚åŠ©å¯¹è±¡
            let help;
            if (typeof helpId === 'number') {
                help = helpData.find(h => h.id === helpId);
            } else {
                help = helpId;
            }
            
            if (!help) return;
            
            // åœ¨åœ°å›¾ä¸Šé«˜äº®æ˜¾ç¤ºè¯¥æ ‡è®°
            markers.forEach(marker => {
                const markerLatLng = marker.getLatLng();
                if (markerLatLng.lat === help.location[0] && markerLatLng.lng === help.location[1]) {
                    marker.openPopup();
                }
            });
            
            // ç§»åŠ¨åœ°å›¾åˆ°è¯¥ä½ç½®
            map.setView(help.location, 15);
            
            // åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ‰“å¼€ä¾§è¾¹æ 
            if (window.innerWidth <= 1200) {
                document.getElementById('map-sidebar').classList.add('open');
            }
        }
        
        // åˆå§‹åŒ–ç»Ÿè®¡æ•°æ®
        function initStats() {
            // å®æ—¶æ›´æ–°ç»Ÿè®¡æ•°æ®
            setInterval(() => {
                // æ¨¡æ‹Ÿæ•°æ®å˜åŒ–
                const activeHelps = document.getElementById('active-helps');
                const currentValue = parseInt(activeHelps.textContent);
                const newValue = Math.max(200, Math.min(300, currentValue + Math.floor(Math.random() * 5) - 2));
                activeHelps.textContent = newValue;
                
                const emergencyHelps = document.getElementById('emergency-helps');
                const emergencyValue = parseInt(emergencyHelps.textContent);
                const newEmergencyValue = Math.max(30, Math.min(50, emergencyValue + Math.floor(Math.random() * 3) - 1));
                emergencyHelps.textContent = newEmergencyValue;
            }, 5000);
        }
        
        // åˆ·æ–°åœ°å›¾
        function refreshMap() {
            const refreshBtn = document.getElementById('refresh-map');
            refreshBtn.classList.add('refreshing');
            
            // æ¨¡æ‹Ÿåˆ·æ–°è¿‡ç¨‹
            setTimeout(() => {
                // é‡æ–°æ·»åŠ æ ‡è®°ï¼ˆæ¨¡æ‹Ÿæ–°æ•°æ®ï¼‰
                addMarkers();
                
                // æ›´æ–°ç»Ÿè®¡æ•°æ®
                initStats();
                
                refreshBtn.classList.remove('refreshing');
                
                // æ˜¾ç¤ºåˆ·æ–°æˆåŠŸæ¶ˆæ¯
                showNotification('åœ°å›¾æ•°æ®å·²æ›´æ–°', 'success');
            }, 1500);
        }
        
        // èšç„¦åˆ°ç‰¹å®šåŒºåŸŸ
        function focusOnArea(areaName) {
            const center = areaCenters[areaName];
            if (center) {
                map.setView(center, 13);
                
                // æ˜¾ç¤ºåŒºåŸŸåç§°
                showNotification(`å·²èšç„¦åˆ°${areaName}`, 'info');
            }
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message, type) {
            // åˆ›å»ºé€šçŸ¥å…ƒç´ 
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : 'info-circle'}"></i>
                    <span>${message}</span>
                </div>
            `;
            
            // æ·»åŠ åˆ°é¡µé¢
            document.body.appendChild(notification);
            
            // æ˜¾ç¤ºé€šçŸ¥
            setTimeout(() => {
                notification.style.opacity = '1';
                notification.style.transform = 'translateY(0)';
            }, 10);
            
            // 3ç§’åç§»é™¤
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
            
            // æ·»åŠ æ ·å¼
            const style = document.createElement('style');
            style.textContent = `
                .notification {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: white;
                    padding: 15px 25px;
                    border-radius: 12px;
                    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
                    z-index: 9999;
                    opacity: 0;
                    transform: translateY(-20px);
                    transition: all 0.3s ease;
                    max-width: 300px;
                }
                .notification.success {
                    border-left: 4px solid #1cc88a;
                }
                .notification.info {
                    border-left: 4px solid #36b9cc;
                }
                .notification i {
                    font-size: 18px;
                }
                .notification.success i {
                    color: #1cc88a;
                }
                .notification.info i {
                    color: #36b9cc;
                }
            `;
            document.head.appendChild(style);
        }
    </script>
</body>
</html>